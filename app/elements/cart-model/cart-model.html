<polymer-element name="cart-model">
<template>
	<core-signals on-core-signal-addtocart="{{addtocartSignal}}"></core-signals>
	<core-localstorage id="storage" name="cart" value="{{mycart}}"></core-localstorage>
</template>
  <script>
    Polymer('cart-model', {
		ready: function() {
			this.$.storage.load();
			var cart = this.$.storage.value;
			if(!cart) {
				var cartContent = [
								  { SKU: "001", title: "Cafeteira Xp 10 Krups", price: "189.90", quantity: 2},
								  { SKU: "002", title: "Torradeira Inox", price: "189.90", quantity: 2}
								  ];
				this.$.storage.value = cartContent;
				this.$.storage.save();
			}
		},
		addtocartSignal: function(e, detail, sender) {
			this.$.storage.load();
			var cart = JSON.parse(this.$.storage.value);
			var newItem = '{ "title": "Liquidificador Delux", "price": "189.90", "quantity": 1}';
			cart.items["003"] = JSON.parse(newItem);
			var item1 = cart.items["001"];
			console.log('title 001', item1.title);
			var item2 = cart.items["002"];
			console.log('title 002', item2.title);
			var item3 = cart.items["003"];
			console.log('title 003', item3.title);
			console.log(cart);
		}
    });
  </script>
</polymer-element>